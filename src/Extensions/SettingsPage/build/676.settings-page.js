"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[676],{1676:(e,d,t)=>{t.r(d),t.d(d,{default:()=>a});var i=t(1609),l=t(6213),n=t(3366),s=t(5497),r=t(1712);const a=({componentId:e,placeholder:d,defaultValue:t,updateField:a,...o})=>{const{getPrefix:f}=(0,n.A)(),c=(0,l.A)().filter((e=>["text","select"].includes(e.type))).map((e=>[e.id,`${e.name} (${e.id})`]));return(0,i.createElement)(s.default,{htmlFor:e,...o},(0,i.createElement)(r.default,{id:e,defaultValue:t,placeholder:d,required:!0,items:c,onChange:(e,d)=>a("address_field",d),onSelect:(e,d)=>{const t=e.current.value?e.current.value+",":"";e.current.value=t+`${f()||""}${d}`,a("address_field",e.current.value)}}))}},6213:(e,d,t)=>{t.d(d,{A:()=>n});var i=t(6087),l=t(9174);const n=()=>{const[e,d]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=[],t=()=>{const e=Array.from(l.k8.values()).flatMap((e=>e.getState().fields));d(e)};return l.k8.forEach((d=>{const i=d.subscribe((()=>{t()}));e.push(i)})),t(),()=>{e.forEach((e=>e()))}}),[]),e}},9174:(e,d,t)=>{t.d(d,{Ay:()=>u,k8:()=>o});var i=t(7723),l=t(5688),n=t.n(l),s=t(4446),r=t(8314);document.body.dataset.navPanel="field-group-settings";const a=(0,s.vt)(((e,d)=>({navPanel:"field-group-settings",setNavPanel:t=>{d().navPanel!==t&&(e((e=>({navPanel:t}))),document.body.dataset.navPanel=t)}}))),o=new Map,f=({id:e="",fields:d=[]})=>{if(o.has(e))return o.get(e);const t=(0,s.vt)(((t,l)=>({id:e,fields:d,addFieldAt:(e,d)=>{const{fields:i}=l();if(d<0||d>i.length)return void console.error(`%cInvalid position: ${d}.`,"color:red");const n=(e=>{const d=`${e}_${(0,r.x8)()}`;return{_id:d,_new:!0,type:e,id:d,name:(0,r.Cv)(e,"_")}})(e);t((e=>({fields:[...e.fields.slice(0,d),n,...e.fields.slice(d)]}))),"group"===e&&f({id:n._id,fields:[]})},addField:e=>l().addFieldAt(e,l().fields.length),prependField:e=>l().addFieldAt(e,0),addFieldBefore:(e,d)=>l().addFieldAt(d,l().fields.findIndex((d=>d._id===e))),addFieldAfter:(e,d)=>l().addFieldAt(d,l().fields.findIndex((d=>d._id===e))+1),duplicateField:e=>{const{fields:d}=l(),n=d.find((d=>d._id===e));if(!n)return;const s=structuredClone(n),a=`${s.type}_${(0,r.x8)()}`;delete s._active,delete s._id_changed,delete s.chosen,delete s.selected,s._original_id=n._id,s.id=a,s._id=a,s.name+=(0,i.__)(" (Copy)","meta-box-builder"),t((d=>{const t=d.fields.findIndex((d=>d._id===e));let i=[...d.fields];return i.splice(t+1,0,s),{fields:i}}));const c=e=>f({id:e._id,fields:u(e)}),u=e=>o.get(e._original_id).getState().fields.map((e=>{e._original_id=e._id;const d=`${e.type}_${(0,r.x8)()}`;return e.id=d,e._id=d,"group"===e.type&&c(e),e}));"group"===s.type&&c(s)},removeField:e=>{const{navPanel:d,setNavPanel:i}=a.getState();t((d=>({fields:d.fields.filter((d=>d._id!==e))}))),"field-settings"===d&&i("")},updateField:(e,d,i)=>{const s=l().fields.find((d=>d._id===e));if(!s)return;if(n().get(s,d)===i)return;const r=structuredClone(s);n().set(r,d,i),t((d=>({fields:d.fields.map((d=>d._id===e?r:d))})))},moveFieldUp:e=>t((d=>{const t=d.fields.findIndex((d=>d._id===e));if(t<=0)return d;let i=[...d.fields];return[i[t-1],i[t]]=[i[t],i[t-1]],{fields:i}})),moveFieldDown:e=>t((d=>{const t=d.fields.findIndex((d=>d._id===e));if(t>=d.fields.length-1)return d;let i=[...d.fields];return[i[t],i[t+1]]=[i[t+1],i[t]],{fields:i}})),setFields:e=>{var d,i;d=l().fields,i=e,d.length===i.length&&d.every(((e,d)=>e._id===i[d]._id))||t({fields:e})}})));return o.set(e,t),t},c=(e,d)=>{let t=(0,r.eC)(e.fields);t=t.filter((e=>e.type)),f({id:d,fields:t}),t.forEach((e=>{"group"===e.type&&c(e,e._id)}))};c(MbbApp,"root");const u=e=>{if(o.has(e))return o.get(e);console.error(`%cList with id "${e}" not found.`,"color:red")}}}]);