"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[74],{6213:(e,t,l)=>{l.d(t,{A:()=>a});var i=l(6087),n=l(9174);const a=()=>{const[e,t]=(0,i.useState)([]);return(0,i.useEffect)((()=>{const e=[],l=()=>{const e=Array.from(n.k8.values()).flatMap((e=>e.getState().fields));t(e)};return n.k8.forEach((t=>{const i=t.subscribe((()=>{l()}));e.push(i)})),l(),()=>{e.forEach((e=>e()))}}),[]),e}},7074:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var i=l(1609),n=l(6427),a=l(7723),d=l(8314),o=l(6213),r=l(3366),u=l(1712);const s=({setting:e,updateField:t})=>{const l=e=>l=>t(`conditional_logic.${e}`,l);return(0,i.createElement)(n.Flex,{gap:1,align:"center",className:"og-include-exclude__intro"},(0,i.createElement)(n.SelectControl,{value:e.type||"visible",onChange:l("type"),options:[{label:(0,a.__)("Visible","meta-box-builder"),value:"visible"},{label:(0,a.__)("Hidden","meta-box-builder"),value:"hidden"}],__nextHasNoMarginBottom:!0}),(0,a.__)("when","meta-box-builder"),(0,i.createElement)(n.SelectControl,{value:e.relation||"and",onChange:l("relation"),options:[{label:(0,a.__)("all","meta-box-builder"),value:"and"},{label:(0,a.__)("any","meta-box-builder"),value:"or"}],__nextHasNoMarginBottom:!0}),(0,a.__)("conditions match","meta-box-builder"))},c=({rule:e,removeRule:t,updateField:l})=>{const{getPrefix:d}=(0,r.A)(),s=["background","button","custom_html","divider","heading","tab","group"],c=(0,o.A)().filter((e=>!s.includes(e.type))).map((e=>[e.id,`${e.name} (${e.id})`])),_=t=>i=>l(`conditional_logic.when.${e.id}.${t}`,i.target.value);return(0,i.createElement)("div",{className:"og-include-exclude__rule"},(0,i.createElement)(u.default,{defaultValue:e.name,placeholder:(0,a.__)("Enter or select a field ID","meta-box-builder"),items:c,isID:!0,onChange:(t,i)=>l(`conditional_logic.when.${e.id}.name`,i),onSelect:(t,i)=>{t.current.value=`${d()||""}${i}`,l(`conditional_logic.when.${e.id}.name`,t.current.value)}}),(0,i.createElement)("select",{className:"og-include-exclude__operator",defaultValue:e.operator,onChange:_("operator")},(0,i.createElement)("option",{value:"="},(0,a.__)("=","meta-box-builder")),(0,i.createElement)("option",{value:">"},(0,a.__)(">","meta-box-builder")),(0,i.createElement)("option",{value:"<"},(0,a.__)("<","meta-box-builder")),(0,i.createElement)("option",{value:">="},(0,a.__)(">=","meta-box-builder")),(0,i.createElement)("option",{value:"<="},(0,a.__)("<=","meta-box-builder")),(0,i.createElement)("option",{value:"!="},(0,a.__)("!=","meta-box-builder")),(0,i.createElement)("option",{value:"contains"},(0,a.__)("contains","meta-box-builder")),(0,i.createElement)("option",{value:"not contains"},(0,a.__)("not contains","meta-box-builder")),(0,i.createElement)("option",{value:"starts with"},(0,a.__)("starts with","meta-box-builder")),(0,i.createElement)("option",{value:"not starts with"},(0,a.__)("not starts with","meta-box-builder")),(0,i.createElement)("option",{value:"ends with"},(0,a.__)("ends with","meta-box-builder")),(0,i.createElement)("option",{value:"not ends with"},(0,a.__)("not ends with","meta-box-builder")),(0,i.createElement)("option",{value:"between"},(0,a.__)("between","meta-box-builder")),(0,i.createElement)("option",{value:"not between"},(0,a.__)("not between","meta-box-builder")),(0,i.createElement)("option",{value:"in"},(0,a.__)("in","meta-box-builder")),(0,i.createElement)("option",{value:"not in"},(0,a.__)("not in","meta-box-builder")),(0,i.createElement)("option",{value:"match"},(0,a.__)("match","meta-box-builder")),(0,i.createElement)("option",{value:"not match"},(0,a.__)("not match","meta-box-builder"))),(0,i.createElement)("input",{defaultValue:e.value,type:"text",placeholder:(0,a.__)("Enter a value","meta-box-builder"),onChange:_("value")}),(0,i.createElement)(n.Button,{variant:"link",isDestructive:!0,onClick:()=>t(e.id),text:(0,a.__)("Remove","meta-box-builder")}))},_=({defaultValue:e,updateField:t})=>{const l=e,o=(0,d.EM)(l.when,"id"),r=e=>{const l={...o};delete l[e],t("conditional_logic.when",l)};return(0,i.createElement)("div",{className:"og-include-exclude"},Object.values(o).length>0&&(0,i.createElement)(s,{setting:l,updateField:t}),Object.values(o).map((e=>(0,i.createElement)(c,{key:e.id,rule:e,removeRule:r,updateField:t}))),(0,i.createElement)(n.Button,{variant:"secondary",onClick:()=>{const e={name:"",operator:"=",value:"",id:(0,d.x8)()};t(`conditional_logic.when.${e.id}`,e),void 0===l.type&&t("conditional_logic.type","visible")},text:(0,a.__)("+ Add Rule","meta-box-builder")}))}},9174:(e,t,l)=>{l.d(t,{Ay:()=>_,k8:()=>u});var i=l(7723),n=l(5688),a=l.n(n),d=l(4446),o=l(8314);document.body.dataset.navPanel="field-group-settings";const r=(0,d.vt)(((e,t)=>({navPanel:"field-group-settings",setNavPanel:l=>{t().navPanel!==l&&(e((e=>({navPanel:l}))),document.body.dataset.navPanel=l)}}))),u=new Map,s=({id:e="",fields:t=[]})=>{if(u.has(e))return u.get(e);const l=(0,d.vt)(((l,n)=>({id:e,fields:t,addFieldAt:(e,t)=>{const{fields:i}=n();if(t<0||t>i.length)return void console.error(`%cInvalid position: ${t}.`,"color:red");const a=(e=>{const t=`${e}_${(0,o.x8)()}`;return{_id:t,_new:!0,type:e,id:t,name:(0,o.Cv)(e,"_")}})(e);l((e=>({fields:[...e.fields.slice(0,t),a,...e.fields.slice(t)]}))),"group"===e&&s({id:a._id,fields:[]})},addField:e=>n().addFieldAt(e,n().fields.length),prependField:e=>n().addFieldAt(e,0),addFieldBefore:(e,t)=>n().addFieldAt(t,n().fields.findIndex((t=>t._id===e))),addFieldAfter:(e,t)=>n().addFieldAt(t,n().fields.findIndex((t=>t._id===e))+1),duplicateField:e=>{const{fields:t}=n(),a=t.find((t=>t._id===e));if(!a)return;const d=structuredClone(a),r=`${d.type}_${(0,o.x8)()}`;delete d._active,delete d._id_changed,delete d.chosen,delete d.selected,d._original_id=a._id,d.id=r,d._id=r,d.name+=(0,i.__)(" (Copy)","meta-box-builder"),l((t=>{const l=t.fields.findIndex((t=>t._id===e));let i=[...t.fields];return i.splice(l+1,0,d),{fields:i}}));const c=e=>s({id:e._id,fields:_(e)}),_=e=>u.get(e._original_id).getState().fields.map((e=>{e._original_id=e._id;const t=`${e.type}_${(0,o.x8)()}`;return e.id=t,e._id=t,"group"===e.type&&c(e),e}));"group"===d.type&&c(d)},removeField:e=>{const{navPanel:t,setNavPanel:i}=r.getState();l((t=>({fields:t.fields.filter((t=>t._id!==e))}))),"field-settings"===t&&i("")},updateField:(e,t,i)=>{const d=n().fields.find((t=>t._id===e));if(!d)return;if(a().get(d,t)===i)return;const o=structuredClone(d);a().set(o,t,i),l((t=>({fields:t.fields.map((t=>t._id===e?o:t))})))},moveFieldUp:e=>l((t=>{const l=t.fields.findIndex((t=>t._id===e));if(l<=0)return t;let i=[...t.fields];return[i[l-1],i[l]]=[i[l],i[l-1]],{fields:i}})),moveFieldDown:e=>l((t=>{const l=t.fields.findIndex((t=>t._id===e));if(l>=t.fields.length-1)return t;let i=[...t.fields];return[i[l],i[l+1]]=[i[l+1],i[l]],{fields:i}})),setFields:e=>{var t,i;t=n().fields,i=e,t.length===i.length&&t.every(((e,t)=>e._id===i[t]._id))||l({fields:e})}})));return u.set(e,l),l},c=(e,t)=>{let l=(0,o.eC)(e.fields);l=l.filter((e=>e.type)),s({id:t,fields:l}),l.forEach((e=>{"group"===e.type&&c(e,e._id)}))};c(MbbApp,"root");const _=e=>{if(u.has(e))return u.get(e);console.error(`%cList with id "${e}" not found.`,"color:red")}}}]);